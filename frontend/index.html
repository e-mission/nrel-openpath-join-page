<!DOCTYPE html>

<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>NREL CanBikeCO Dashboard</title>

		<!-- == APPLICATION HEAD == -->
		<!-- Google Tag Manager -->
		<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KG7PVKB');</script>
		<!-- End Google Tag Manager -->

		<!-- Search engine code -->
		<!--#config timefmt="%Y-%m-%d@%H:%M:%S %Z" -->
		<meta http-equiv="last-modified" content="<!--#echo var='LAST_MODIFIED'-->">

		<!-- Favicon -->
		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

		<!-- iOS icons -->
		<link rel="apple-touch-icon" href="client/img/touch-icon-iphone.png">
		<link rel="apple-touch-icon" sizes="72x72"   href="client/img/touch-icon-ipad.png">
		<link rel="apple-touch-icon" sizes="114x114" href="client/img/touch-icon-iphone-retina.png">
		<link rel="apple-touch-icon" sizes="144x144" href="client/img/touch-icon-ipad-retina.png">

		<!-- GLOBAL styles -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link href="client/css/nrel.complete.min.css" rel="stylesheet" type="text/css" >

		<!-- NREL Application styles -->
		<link href="client/css/nrel.application.min.css" rel="stylesheet" type="text/css" >

		<!-- Fonts -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet"> 

		<!-- Font Awesome -->
		<script src="https://kit.fontawesome.com/32f532493a.js" crossorigin="anonymous"></script>

		<!-- jQuery -->
		<script src="https://code.jquery.com/jquery-3.6.1.min.js"   integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="   crossorigin="anonymous"></script>

        <!-- QRcode -->
        <script src="client/js/qrcode.js"></script>

    <!-- i18n from CDN-->
    <script src="https://cdn.jsdelivr.net/npm/cldrpluralruleparser@1.4.0/dist/cldrpluralruleparser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.7/jquery.i18n.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.7/jquery.i18n.messagestore.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.7/jquery.i18n.fallbacks.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.7/jquery.i18n.language.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.7/jquery.i18n.parser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.i18n/1.0.7/jquery.i18n.emitter.min.js"></script>

    <!-- Language button styling -->    

      <style>

      .box {
        height: 36px;
        width: 110px;
        background-color: #ffffff;
        outline: 2px solid rgb(141, 195, 239);
      }
      .boxOption {
        background-color: rgb(255, 255, 255);
      }      

      </style>

		<!-- == END APPLICATION HEAD == -->
	</head>
	<body>

    <!-- Google Tag Manager (noscript) -->
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KG7PVKB"
              height="0" width="0" style="display:none;visibility:hidden" sandbox="allow-same-origin"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Site application banner -->
    <!--stopindex-->
    <a href="#content" class="sr-only app">Skip to main content</a>

    <header id="banner">
    <div class="banner-logo">
    <div class="container app">
      <div class="row">

        <div class="col-md-6 col-xl-4 order-md-2">
          <a href="http://www.nrel.gov"><div class="logo"><img src="client/img/nrel-logo-web.svg" height="100%" width="100%" alt="National Renewable Energy Laboratory" /></div></a>
        </div>

        <div class="col-12 d-md-none">
          <!-- Start MOBILE collapsible site search bar -->
          <div class="site-search-bar">
            <div class="container">
              <div class="row">
                <div class="col d-flex justify-content-center mb-1">
                  <nav class="navbar navbar-light">
                    <div class="navbar-collapse collapse" id="searchbar-collapse-mobile">
                      <form
                          method="get"
                          class="site-searchbar-form form-inline ThunderstoneForm"
                          action="https://search4.nrel.gov/texis/search/" 
                          id="ThunderstoneSearchForm">

                        <input type="hidden" name="pr" value="metanrel" />
                        <div class="form-group">
                            <label for="query" class="searchFiler sr-only">NREL.gov</label>
                            <input
                                type="search"
                                id="query" name="query"
                                maxlength="2047"
                                placeholder="NREL.gov"
                                class="form-control"
                                aria-label="NREL.gov">
                            <button type="submit" class="search btn btn-default">Search</button>
                        </div>
                      </form>
                    </div>
                  </nav>
                </div>
              </div>
            </div>
          </div>    
          <!-- End MOBILE collapsible site search bar -->
        </div>

        <div class="col-md-6 col-xl-8 order-md-1">
          <a id="pageTitle" class="app-name">NREL OpenPATH Join Page</a>
        </div>

      </div>
    </div>
    </div>
    </header>
    <!--startindex-->


    <!-- TOP NAVIGATION -->
    <!--stopindex-->
    <div class="program-header">
    <div class="container">
    <nav class="navbar navbar-expand-md navbar-light">

      <div id="program-menu" class="mr-auto">
        <button class="custom-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#topnav-collapse" aria-controls="topnav-collapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
          <span class="navbar-toggle-label">Menu</span>
        </button>
      </div>

      <!-- Navigation -->
      <div class="navbar-collapse collapse" id="topnav-collapse">
        
        <ul class="nav navbar-nav">
          <li data-topnav="Public Dashboard" class="nav-item"><a id="publicDashboardLink" href="should_be_the_public_dashboard_link" class="publicDashboard nav-link">Public Dashboard</a></li>
          <li data-topnav="Participant Guidelines" class="nav-item"><a id="participantGuidelinesLink" href="https://www.nrel.gov/transportation/openpath-participant-guidelines.html" class="participantGuidelines nav-link">Participant Guidelines</a></li>
          <li data-topnav="TSDC" class="nav-item"><a id="TSDCLink" href="https://www.nrel.gov/transportation/secure-transportation-data/index.html" class="tsdc nav-link">TSDC</a></li>
        </ul>
        <ul class="nav navbar-nav ml-auto">
          <!--Navigation tabs are commented out for reference
          <li class="nav-item"><a href="#" class="nav-link">Login</a></li>
          <li class="nav-item"><a href="#" class="nav-link">Help</a></li>
          -->
        </ul>
        <!-- desktop search button -->
        <button type="button" class="custom-toggler site-navbar-toggler site-searchbar-toggle d-none d-md-inline" data-toggle="collapse" data-target="#searchbar-collapse" aria-expanded="false" aria-label="Toggle Search">
          <span class="fa fa-search" aria-hidden="true"></span>
        </button>

      <!-- Language select button-->
      <div class="lead">
        <select name="Select language" id="buttonBox" class="language box custom-select sources" onchange="getLang()">
          <option class="boxOption" value="en">English</option>;
          <option class="boxOption" value="es">Espa√±ol</option>;  
        </select>
      </div>

      </div>

    </nav>
    </div><!--container-->
    </div><!--program-header-->
    <!-- mobile search button -->
    <button type="button" class="custom-toggler site-navbar-toggler site-searchbar-toggle d-md-none" data-toggle="collapse" data-target="#searchbar-collapse-mobile" aria-expanded="false" aria-label="Toggle Search">
    <span class="fa fa-search" aria-hidden="true"></span>
    </button>   
    <!-- Start collapsible site search bar -->
    <div class="site-search-bar">
    <div class="container">
    <div class="row">
      <div class="col">
        <nav class="navbar navbar-light">
          <div class="navbar-collapse collapse" id="searchbar-collapse">
            <form
                method="get"
                class="site-searchbar-form form-inline ThunderstoneForm"
                action="https://search4.nrel.gov/texis/search/" 
                id="ThunderstoneSearchForm">

              <input type="hidden" name="pr" value="metanrel" />
              <div class="form-group">
                  <label for="query" class="SearchFiler sr-only">NREL.gov</label>
                  <input
                      type="search"
                      id="query" name="query"
                      maxlength="2047"
                      placeholder="NREL.gov"
                      class="form-control"
                      aria-label="NREL.gov">
                  <button type="submit" class="Search btn btn-default">Search</button>
              </div>
            </form>
          </div>
        </nav>
      </div>
    </div>
    </div>
    </div>  
    
    <!-- End collapsible site search bar -->
    <!--startindex-->

		<div class="container" id="content" role="main">
         <div class="row">
            <div class="col-lg-9">
               <h1 id="studyTitleOne"></h1>
               <p class="greeting"></p>

              <p style="display:inline;">
                <span class="thankYouMessage lead">Thank you for participating in the </span>
                <span id="studyTitleTwo" class="lead"></span>
                <span>.</span>
              </p>

              <p></p> <!-- Adds a precise space-->
                              
               <h2 class="studyPurpose">Purpose of Study</h2>

               <p id="shortTextualDescription"></p>
               
               <h2 class="dataCollection">Data Collection</h2>
               
               <p style="display:inline;">
                <span class="dC1">We will use the </span>
                <a href="https://www.nrel.gov/transportation/openpath.html">NREL OpenPATH</a> 
                <span class="dC2"> platform for this data collection. This open-source platform collects a complete snapshot 
                  of your travel and uses it to estimate yourindividual transportation carbon 
                  footprint and compare it against US 2030 and 2050 goals. It also computes and 
                  publishes aggregate metrics around mode share and distance traveled. </span> 
               </p>

               <p></p> <!-- Adds a precise space-->

               <div class="row justify-content-center">
                     
                 <div class="col-md-6 mb-4"><img id="OpenPATH-dashboard-image" class="img-responsive img-fluid" src="client/img/OpenPATH-dashboard-preview-en.png" alt="OpenPATH dashboard preview"></div>
                 <div class="col-md-6 mb-4"><img id="" class="img-responsive img-fluid" src="client/img/public-dashboard-preview.png" alt="Public dashboard preview"></div>

               </div>
               <p id="whyWeCollect"></p>
               
               <h2 class="installNREL">Install the NREL OpenPATH App on Your Phone</h2>
               
               <ol>
                  <li>
                    <p style="display:inline;">
                      <span class="iN1">Download the NREL OpenPATH app from the</span>
                      <a href="https://apps.apple.com/us/app/nrel-openpath/id1628058068">Apple Store</a> or the 
                      <span class="iN2"> or the </span>
                      <a href="https://play.google.com/store/apps/details?id=gov.nrel.cims.openpath">Google Play Store</a>
                      <span>.</span>
                      
                    </p>
                  </li>
                  
                  <li class="iN3">Scan the QR code or visit the link below to join this program.</li>
                  
                  <li class="iN4">Remember to give all the requested permissions, including ("always") background location
                     access. If you have a Samsung or Huawei phone, turn off background restrictions.
                  </li>
                  
                  <li class="iN5">Track your trips, label them when prompted, and check out your carbon footprint.</li>
                  
               </ol>
               <p style="display:inline;">
                <span class="iN6">For additional information, see the </span>
                <a class="iN7" href="https://www.nrel.gov/transportation/openpath-participant-guidelines.html">participant guidelines</a>
                <span>.</span>
              </p>
               
               <div class="well text-center">
                  
                  <h2 class="joinStudy">Join the Study</h2>
                  
                  <p class="jS1">After you have installed the NREL OpenPATH app on your phone, join the study by scanning
                     the QR code or visiting the link below using your phone.
                  </p>
                  
                  <div class="row justify-content-center">
                     
                    <div id="qrcode" style="width:100px; height:100px; margin-top:15px;"></div>
                     
                  </div>
                  
                  <p><a id="joinStudyLink" href="should_be_the_join_link"></a></p>

                    <span class="jS2">You will log in using an autogenerated token. Save your token in case you lose or
                      change phones. If you lose your token, NREL cannot retrieve it for you since we do
                      not have the ability to match a token to an individual user.</span>
                  
               </div>
               
               <h2 class="dataPrivacy">Data Privacy and Security</h2>
               
               <p style="display:inline;">
                <span class="dP1">The system </span>
                <strong class="dP2">will not</strong>
                <span class="dP3">collect any of the traditional personally identifiable information (i.e., no name,
                  email, or phone number).</span>
              </p>

              <p></p><!-- Adds a precise space-->

              <!--TODO: Add translation-->
               <p class="TPI">You will log in using a token generated by the phone app. Only you know your token. Since we don‚Äôt collect email or phone number, there is no ‚ÄúForgot password‚Äù functionality. NREL staff cannot identify your account or restore your data without your token. You should save this token in case you change phones.</p>
               
               <p class="dP4">The collected data will be stored in a FEDRAMP-certified medium cluster at NREL and
                  encrypted both in transit and at rest. Data from this study will be stored separately
                  from other study data using the NREL-hosted version of the OpenPATH platform.
               </p>
               
               <p class="dP5">The raw data from this study will only be made available to:</p>
               
               <ul>
                
                  <li>
                    <p style="display:inline;">
                      <span class="dP6">Program administrators from </span>
                      <a id="deploymentPartnerName"></a>
                      <span class="dP7"> to monitor the </span>
                      <a id="programOrStudy"></a>
                      <span class="dP8"> and potentially send recommendations for alternate travel modes.</span>
                    </p>
                  </li>
                  
                  <li class="dP9">NREL OpenPATH developers for debugging.</li>

               </ul>
               
               <p style="display:inline;">
                <span class="dP10">On completion of the study, the data will be archived in NREL's </span>
                <a class="dP13" href="https://www.nrel.gov/transportation/secure-transportation-data/index.html">Transportation Secure Data Center</a>
                <span class="dP11"> to support travel behavior research.</span>
                </p>

                <p></p><!-- Adds a precise space-->
               
               <p class="dP12">Examples of research that might use the data include:</p>
               
               <div id="researchQuestions"></div>
               
               <h2 class="contact">Contact</h2>
               
               <div class="bio">
                  <p class="header">K. Shankari</p>
                  <p class="contactTitle header-description">Postdoctoral Researcher, Director's Fellow</p><a href="mailto:K.Shankari@nrel.gov"><span class="fa fa-envelope" aria-hidden="true"></span>K.Shankari@nrel.gov</a><br><a href="tel:+1-303-384-6450"><span class="fa fa-phone-square" aria-hidden="true"></span>303-384-6450</a></div>
               
            </div>
				</nav>
 			</div><!--container-->
 		</div><!--program-header-->

 		<!-- == APPLICATION FOOTER | updated 3/2021 == -->
 		<!--stopindex-->
    <footer id="footer" class="hidden-print">

      <div class="footertop">
           <div class="container">
              <div class="row">
                  <div class="col-12 col-lg-5">
                      <a href="http://www.nrel.gov/index.html"><strong class="nrel">National Renewable Energy Laboratory</strong></a>
                  </div>
                  <div class="col col-lg-7">
                      <div class="d-flex flex-column flex-lg-row justify-content-lg-start global">
                          <div><a class="about" href="http://www.nrel.gov/about/index.html">About</a></div>
                          <div><a class="research" href="http://www.nrel.gov/research/index.html">Research</a></div>
                          <div><a class="workWithUs" href="http://www.nrel.gov/index.html">Work with Us</a></div>
                          <div><a class="news" href="http://www.nrel.gov/news/index.html">News</a></div>
                          <div><a class="careers" href="http://www.nrel.gov/careers/index.html">Careers</a></div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="footerbottom">
           <div class="container">
               <div class="row">
                  <div class="col-md-4 col-lg-5">
                      <div><a class="contactUs" href="http://www.nrel.gov/webmaster.html">Contact Us</a></div>
                      <div class="mt-2"><a class="visit" href="http://www.nrel.gov/about/visiting-nrel.html">Visit</a></div>
                      <div class="mt-2"><a class="subscribe" href="http://www.nrel.gov/news/subscribe.html">Subscribe</a></div>
                      <div class="mt-3">
                          <ul class="social-links list-inline">
                              <li class="list-inline-item"><a href="https://www.facebook.com/nationalrenewableenergylab" aria-label="Follow NREL on Facebook"><i class="fa fa-facebook-square"><!--facebook--></i></a>
                              </li>
                              <li class="list-inline-item"><a href="https://www.instagram.com/nationalrenewableenergylab/" aria-label="Follow NREL on Instagram"><i class="fa fa-instagram"><!--Instagram--></i></a></li>
                              <li class="list-inline-item"><a href="https://www.linkedin.com/company/national-renewable-energy-laboratory"
                                  aria-label="Follow NREL on Linked In"><i class="fa fa-linkedin-square"><!--Linked In--></i></a>
                              </li>
                              <li class="list-inline-item"><a href="https://www.youtube.com/user/NRELPR/" aria-label="Follow NREL on YouTube"><i class="fa fa-youtube"><!--You Tube--></i></a>
                              </li>
                              <li class="list-inline-item"><a href="https://twitter.com/nrel/" aria-label="Follow NREL on Twitter"><i class="fa fa-twitter"><!--twitter--></i></a>
                              </li>
                          </ul>
                      </div>
                  </div>
                  <div class="col-md-8 col-lg-7 globalsecondary">
                      <div class="row">
                          <div class="col-sm-6 col-lg-3">
                              <div class="mt-1"><a class="accessibility" href="http://www.nrel.gov/accessibility.html">Accessibility</a></div>
                              <div class="mt-1"><a class="disclaimer" href="http://www.nrel.gov/disclaimer.html">Disclaimer</a></div>
                              <div class="mt-1"><a class="snp" href="http://www.nrel.gov/security.html">Security and Privacy</a></div>
                              <div class="mt-1"><a class="siteFeedback" href="http://www.nrel.gov/webmaster.html">Site Feedback</a></div>
                          </div>
                          <div class="col-sm-6 col-lg-3">
            
                              <div class="mt-1"><a class="developers" href="https://developer.nrel.gov/">Developers</a></div>
                              <div class="mt-1"><a class="employees" href="https://thesource.nrel.gov/">Employees</a></div>
                          </div>
                      </div>
                  </div>
              </div>
               <hr />
               <div class="mt-4">
               <div class="row">
                   <div class="col-sm-5">
                       <a href="https://www.allianceforsustainableenergy.org/"><img class="mr-5 mb-3" src="client/img/alliance-logo_black.png" alt="Alliance for Sustainable Energy, LLC"></a>
                       <a href="https://www.energy.gov"><img src="client/img/logo-doe-footer.png" alt="U.S. Department of Energy" class="mb-3"></a>
                   </div>

                   <div class="col-12 col-sm-7">
                    <p class="nrel-attr" style="display:inline;">
                      <span class="ft1">The National Renewable Energy Laboratory is a national laboratory of the </span>
                      <a class="usde" href="https://www.energy.gov/">U.S. Department of Energy</a>,
                      <a class="oeere" href="https://www.energy.gov/eere/office-energy-efficiency-renewable-energy">Office of Energy Efficiency and Renewable Energy</a>
                      <span class="ft2">, operated by the </span>
                      <a class="ase" href="https://www.allianceforsustainableenergy.org/">Alliance for Sustainable Energy LLC</a>.
                    </p>

                    
                  </div>
              </div>
               </div>
          </div>
      </div>

  </footer>

    <!--startindex-->
		<!-- == END APPLICATION FOOTER == -->

		<!-- == GLOBAL APPLICATION SCRIPTS == -->
		<!-- Bootstrap -->
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

		<!-- Global scripts -->
		<script src="client/js/app.min.js"></script>

		<!-- Site application scripts -->
		<script src="client/js/plugins.min.js"></script>
		<script src="client/js/app.min.js"></script>

		<!-- Custom scripts -->
		<script type="text/javascript">
      /*
      * Copied and adapted from the phone `dynamic_config.js`
      * Adapted by supporting program name via parameter to make it
      * easier to test against localhost
      */
      const _getStudyName = function(connectUrl) {
        const _getFromParamOrDefault = function() {
          const param_study_name = new URL(connectUrl).searchParams.get("study_config");
          return param_study_name == null? "stage-program" : param_study_name;
        }
        const orig_host = new URL(connectUrl).hostname;
        // If we are running this on dev, use a param instead to enable testing
        if (orig_host == "localhost") { return _getFromParamOrDefault(); }
        const first_domain = orig_host.split(".")[0];
        if (first_domain == "openpath-stage") { return _getFromParamOrDefault(); }
        const openpath_index = first_domain.search("-openpath");
        if (openpath_index == -1) { return undefined; }
        const study_name = first_domain.substr(0,openpath_index);
        return study_name;
      }

      var curr_lang = "en"; // Default language is set to English
      var data;

      function getLang(){

        var selectBox = document.getElementById("buttonBox");
        var selectedValue = selectBox.options[selectBox.selectedIndex].value;
        curr_lang = selectedValue;
        localStorage.setItem("langValue", curr_lang);

        const STUDY_NAME = _getStudyName(window.location);
        const JOIN_CODE = `nrelopenpath://join_study?label=${STUDY_NAME}&source=github`

        // Title card
        const PAGE_TITLE_TEXT = `${data.intro.translated_text[curr_lang].deployment_name} Join Page`
        $('#pageTitle').text(PAGE_TITLE_TEXT);
        document.title = PAGE_TITLE_TEXT;

        // Navigation links
        const PUBLIC_DASHBOARD_LINK = data.server.connectUrl.replace("api", "public");;
        $('#publicDashboardLink').attr('href', PUBLIC_DASHBOARD_LINK);

        // Deployment partner content text
        const DEPLOYMENT_PARTNER_NAME = `${data.intro.translated_text[curr_lang].deployment_partner_name}`;
        $('#deploymentPartnerName').text(DEPLOYMENT_PARTNER_NAME);
        
        // Program or study specific differences
        const PROGRAM_OR_STUDY = `${data.intro.program_or_study}`;
        if(PROGRAM_OR_STUDY == 'study') {
          $('#tokenType').text("an autogenerated ");
        } else if(PROGRAM_OR_STUDY == 'program') {
          $('#tokenType').text("a program-provided ");
        }
        $('#programOrStudy').text(PROGRAM_OR_STUDY);

        // Study title content text
        const STUDY_TITLE_TEXT = DEPLOYMENT_PARTNER_NAME + ` ${data.intro.translated_text[curr_lang].deployment_name}`;
        $('#studyTitleOne').text(STUDY_TITLE_TEXT);
        $('#studyTitleTwo').text(STUDY_TITLE_TEXT);

        // Short textual description content text
        const SHORT_TEXTUAL_DESCRIPTION_TEXT = `${data.intro.translated_text[curr_lang].short_textual_description}`;
        $('#shortTextualDescription').text(SHORT_TEXTUAL_DESCRIPTION_TEXT);
        
        // Why we collect content text
        const WHY_WE_COLLECT_TEXT = `${data.intro.translated_text[curr_lang].why_we_collect}`;
        $('#whyWeCollect').text(WHY_WE_COLLECT_TEXT);

        // OpenPATH dashboard image preview
        var img = document.getElementById("OpenPATH-dashboard-image");
        img.src=`client/img/OpenPATH-dashboard-preview-${curr_lang}.png`;
        
        // Join study text
        // JOIN_CODE was already defined above
        $('#joinStudyLink').text(JOIN_CODE)
        $('#joinStudyLink').attr('href', JOIN_CODE)

        // Research questions generation
        $("#cList").remove();
        $('#researchQuestions').append("<ul id='cList'></ul>");
        for (i = 0; i < 3; i++) { // 3 research questions maximum
          var RESEARCH_QUESTION_TEXT = `${data.intro.translated_text[curr_lang].research_questions[i]}`;
          if(RESEARCH_QUESTION_TEXT == "undefined") { // Skip the entry if is not defined.
            continue;
          }
          $("#cList").append("<li>" + RESEARCH_QUESTION_TEXT + "</li>");
        }
        
      };

      //Page load order

      const STUDY_NAME = _getStudyName(window.location);
      async function fetchText() {
        const response = await fetch(`https://raw.githubusercontent.com/e-mission/nrel-openpath-deploy-configs/main/configs/${STUDY_NAME}.nrel-op.json`);
        const textFetch = await response.json();
        return textFetch;
      }

      fetchText().then(textFetch => { 
        data = textFetch;
        $(document).ready(function() {
          getLang();
        });
      });
      
      $(document).ready(function() {

        const STUDY_NAME = _getStudyName(window.location);
        const JOIN_CODE = `nrelopenpath://join_study?label=${STUDY_NAME}&source=github`

        // Generate study-join QR code
        var qrcode = new QRCode(document.getElementById("qrcode"), {
          text: JOIN_CODE,
          width: 100,
          height: 100,
          colorDark : "#000000",
          colorLight : "#ffffff",
          correctLevel : QRCode.CorrectLevel.H
        });
      });      

		</script>
    
    <!-- i18n implementation -->
    <script>

    function updateText() {
      'use strict';
      var i18n = $.i18n(), language, search, searchFiler, publicDashboard, participantGuidelines, tsdc, thankYouMessage, studyPurpose,
      dataCollection, dC1, dC2, installNREL, iN1, iN2, iN3, iN4, iN5, iN6, iN7, joinStudy, jS1, jS2, dataPrivacy, dP1,dP2,dP3,dP4,dP5,dP6,dP7,
      dP8,dP9,dP10,dP11,dP12,dP13,contact,contactTitle,nrel, about, research, workWithUs, news, careers, contactUs, visit, subscribe, 
      accessibility, disclaimer, snp, siteFeedback, developers, employees, ft1, usde, oeere, ft2, ase, tokenPrivacyInfo;

      language = $( '.language option:selected' ).val();
      search = 'search';
      searchFiler = 'searchFiler';
      publicDashboard = 'publicDashboard';
      participantGuidelines = 'participantGuidelines';
      tsdc = 'tsdc';
      thankYouMessage = 'thankYouMessage';
      studyPurpose = 'studyPurpose';
      dataCollection = 'dataCollection';
      dC1 = 'dC1';
      dC2 = 'dC2';
      installNREL = 'installNREL';
      iN1 = 'iN1';
      iN2 = 'iN2';
      iN3 = 'iN3';
      iN4 = 'iN4';
      iN5 = 'iN5';
      iN6 = 'iN6';
      iN7 = 'iN7';
      joinStudy = 'joinStudy';
      jS1 = 'jS1';
      jS2 = 'jS2';
      dataPrivacy = 'dataPrivacy';
      dP1 = 'dP1';
      dP2 = 'dP2';
      dP3 = 'dP3';
      dP4 = 'dP4';
      dP5 = 'dP5';
      dP6 = 'dP6';
      dP7 = 'dP7';
      dP8 = 'dP8';
      dP9 = 'dP9';
      dP10 = 'dP10';
      dP11 = 'dP11';
      dP12 = 'dP12';
      dP13 = 'dP13';
      contact = 'contact';
      contactTitle = 'contactTitle';
      nrel = 'nrel';
      about = 'about';
      research = 'research';
      workWithUs = 'workWithUs';
      news = 'news';
      careers = 'careers';
      contactUs = 'contactUs';
      visit = 'visit';
      subscribe = 'subscribe';
      accessibility = 'accessibility';
      disclaimer = 'disclaimer';
      snp = 'snp';
      siteFeedback = 'siteFeedback';
      developers = 'developers';
      employees = 'employees';
      ft1 = 'ft1';
      usde = 'usde';
      oeere = 'oeere';
      ft2 = 'ft2';
      ase = 'ase';
      tokenPrivacyInfo = 'tokenPrivacyInfo';
      

      i18n.locale = language;
      i18n.load( 'i18n/' + i18n.locale + '.json', i18n.locale ).done(
        function () {

        var getSearch = $.i18n(search);
        $( '.Search' ).text(getSearch);

        var getSearchFiler = $.i18n(searchFiler);
        $( '.searchFiler' ).text(getSearchFiler);

        var getPublicDashboard = $.i18n(publicDashboard);
        $( '.publicDashboard' ).text(getPublicDashboard);

        var getParticipantGuidelines = $.i18n(participantGuidelines);
        $( '.participantGuidelines' ).text(getParticipantGuidelines);

        var getTSDC = $.i18n(tsdc);
        $( '.tsdc' ).text(getTSDC);

        var getThankYouMessage = $.i18n(thankYouMessage);
        $( '.thankYouMessage' ).text(getThankYouMessage);

        var getStudyPurpose = $.i18n(studyPurpose);
        $( '.studyPurpose' ).text(getStudyPurpose);

        var getDataCollection = $.i18n(dataCollection);
        $( '.dataCollection' ).text(getDataCollection);

        var getDC1 = $.i18n(dC1);
        $( '.dC1' ).text(getDC1);

        var getDC2 = $.i18n(dC2);
        $( '.dC2' ).text(getDC2); 

        var getInstallNRELL = $.i18n(installNREL);
        $( '.installNREL' ).text(getInstallNRELL);

        var getiN1 = $.i18n(iN1);
        $( '.iN1' ).text(getiN1);

        var getiN2 = $.i18n(iN2);
        $( '.iN2' ).text(getiN2);

        var getiN3 = $.i18n(iN3);
        $( '.iN3' ).text(getiN3);

        var getiN4 = $.i18n(iN4);
        $( '.iN4' ).text(getiN4);

        var getiN5 = $.i18n(iN5);
        $( '.iN5' ).text(getiN5);

        var getiN6 = $.i18n(iN6);
        $( '.iN6' ).text(getiN6);

        var getiN7 = $.i18n(iN7);
        $( '.iN7' ).text(getiN7);

        var getJoinStudy = $.i18n(joinStudy);
        $( '.joinStudy' ).text(getJoinStudy);

        var getjS1 = $.i18n(jS1);
        $( '.jS1' ).text(getjS1);

        var getjS2 = $.i18n(jS2);
        $( '.jS2' ).text(getjS2);

        var getDataPrivacy = $.i18n(dataPrivacy);
        $( '.dataPrivacy' ).text(getDataPrivacy);

        var getdP1 = $.i18n(dP1);
        $( '.dP1' ).text(getdP1);

        var getdP2 = $.i18n(dP2);
        $( '.dP2' ).text(getdP2);

        var getdP3 = $.i18n(dP3);
        $( '.dP3' ).text(getdP3);

        var getdP4 = $.i18n(dP4);
        $( '.dP4' ).text(getdP4);

        var getdP5 = $.i18n(dP5);
        $( '.dP5' ).text(getdP5);

        var getdP6 = $.i18n(dP6);
        $( '.dP6' ).text(getdP6);

        var getdP7 = $.i18n(dP7);
        $( '.dP7' ).text(getdP7);

        var getdP8 = $.i18n(dP8);
        $( '.dP8' ).text(getdP8);

        var getdP9 = $.i18n(dP9);
        $( '.dP9' ).text(getdP9);

        var getdP10 = $.i18n(dP10);
        $( '.dP10' ).text(getdP10);

        var getdP11 = $.i18n(dP11);
        $( '.dP11' ).text(getdP11);

        var getdP12 = $.i18n(dP12);
        $( '.dP12' ).text(getdP12);

        var getdP13 = $.i18n(dP13);
        $( '.dP13' ).text(getdP13);

        var getContact = $.i18n(contact);
        $( '.contact' ).text(getContact);

        var getContactTitle = $.i18n(contactTitle);
        $( '.contactTitle' ).text(getContactTitle);

        var getNREL = $.i18n(nrel);
        $( '.nrel' ).text(getNREL);

        var getAbout = $.i18n(about);
        $( '.about' ).text(getAbout);

        var getResearch = $.i18n(research);
        $( '.research' ).text(getResearch);

        var getWorkWithUs = $.i18n(workWithUs);
        $( '.workWithUs' ).text(getWorkWithUs);

        var getNews = $.i18n(news);
        $( '.news' ).text(getNews);

        var getCareers = $.i18n(careers);
        $( '.careers' ).text(getCareers);

        var getContactUs = $.i18n(contactUs);
        $( '.contactUs' ).text(getContactUs);

        var getVisit = $.i18n(visit);
        $( '.visit' ).text(getVisit);

        var getSubscribe = $.i18n(subscribe);
        $( '.subscribe' ).text(getSubscribe);

        var getAccessibility = $.i18n(accessibility);
        $( '.accessibility' ).text(getAccessibility);

        var getDisclaimer = $.i18n(disclaimer);
        $( '.disclaimer' ).text(getDisclaimer);

        var getSNP = $.i18n(snp);
        $( '.snp' ).text(getSNP);

        var getSiteFeedback = $.i18n(siteFeedback);
        $( '.siteFeedback' ).text(getSiteFeedback);

        var getDevelopers = $.i18n(developers);
        $( '.developers' ).text(getDevelopers);

        var getEmployees = $.i18n(employees);
        $( '.employees' ).text(getEmployees);

        var getFT1 = $.i18n(ft1);
        $( '.ft1' ).text(getFT1);

        var getUSDE = $.i18n(usde);
        $( '.usde' ).text(getUSDE);

        var getOEERE = $.i18n(oeere);
        $( '.oeere' ).text(getOEERE);

        var getFT2 = $.i18n(ft2);
        $( '.ft2' ).text(getFT2);

        var getASE = $.i18n(ase);
        $( '.ase' ).text(getASE);

        var getTokenPrivacyInfo = $.i18n(tokenPrivacyInfo);
        $( '.TPI' ).text(getTokenPrivacyInfo);
        });
      }
      // Enable debug
      $.i18n.debug = true;

      $( document ).ready( function ( $ ) {
      'use strict';
      updateText();
      $( '.search, .searchFiler, .publicDashboard, .participantGuidelines, .tsdc, .language, .installNREL, .iN1, .iN2, .iN3, .iN4, .iN5, .joinStudy, .jS1, .jS2, .TPI' ).on( 'change keyup', updateText );
      } );

    </script>
	</body>
</html>
